{{ if .error }}
  <div class="box text-box">
    <p class="error">{{ .error }}</p>
  </div>
{{ else }}
  <div
    {{ if ne .build.completed true -}}
      hx-get="/new/build-status?id={{ .build.id }}" hx-trigger="every 1s"
    {{- end }}
    class="build-status"
  >
    <div class="box text-box">
      {{ if .build.completed -}}
        <b>Build complete</b>
      {{- else -}}
        <b>Building...</b>
      {{- end }}
      <p>
        {{ if .build.completed }}
          Exit code:
          {{ .build.exit_code }}
          <br />
          Build time:
          {{ .build.time_seconds }}
          {{ if .build.error }}
            <br />
            Exited with error:
            {{ .build.error }}
          {{ end }}
        {{ else }}
          Build started: {{ .build.time_seconds }} ago
        {{ end }}
        <br />
        Command: "{{ .build.command }}"
      </p>
      {{ if .build.completed }}
        <div class="box text-box">
          <p>
            {{ if .build.error }}
              <b>Build failed with an error:</b><br />
              Review the logs and try again.
            {{ else }}
              <b>Build completed successfully:</b><br />
              Continue to the application page >
              <a href="/{{ .result_name }}/info">{{ .result_name }}/info</a>
            {{ end }}
          </p>
        </div>
      {{ end }}
      Logs: <code><pre class="wrap">{{ .build.logs.String }}</pre></code>
    </div>
  </div>
{{ end }}
